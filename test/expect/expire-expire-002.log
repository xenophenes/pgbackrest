run 002 - Expire::stanzaUpgrade
===============================

* full backup: label = [BACKUP-FULL-1], start = 000000010000000000000000, stop = 000000010000000000000002
* incr backup: label = [BACKUP-INCR-1], prior = [BACKUP-FULL-1], start = 000000010000000000000006, stop = 000000010000000000000008
* full backup: label = [BACKUP-FULL-2], start = 00000001000000000000000C, stop = 00000001000000000000000E
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-1]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000000000000C","backup-archive-stop":"00000001000000000000000E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=6393320793115174899
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-1]
[BACKUP-INCR-1]
[BACKUP-FULL-2]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.2-1

[TEST_PATH]/db-master/repo/archive/db/9.2-1:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.2-1/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000.gz
000000010000000000000010-0000000000000000000000000000000000000000
000000010000000000000011-0000000000000000000000000000000000000000.gz

Create backups in current db version
> [CONTAINER-EXEC] db-master [BACKREST-BIN] --config="[TEST_PATH]/db-master/pgbackrest.conf" --stanza=db --log-level-console=detail --retention-archive-type=diff expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --config=[TEST_PATH]/db-master/pgbackrest.conf --lock-path=[TEST_PATH]/db-master/repo/lock --log-level-console=detail --log-level-file=trace --log-level-stderr=off --log-path=[TEST_PATH]/db-master/repo/log --repo-path=[TEST_PATH]/db-master/repo --retention-archive-type=diff --stanza=db
P00   WARN: option retention-full is not set, the repository may run out of space
            HINT: to retain full backups indefinitely (without warning), set option 'retention-full' to the maximum.
P00   WARN: WAL segments will not be expired: option 'retention-archive-type=diff' but neither option 'retention-archive' nor option 'retention-diff' is set
P00   INFO: option 'retention-archive' is not set - archive logs will not be expired
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-1]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000000000000C","backup-archive-stop":"00000001000000000000000E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=6393320793115174899
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-1]
[BACKUP-INCR-1]
[BACKUP-FULL-2]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.2-1

[TEST_PATH]/db-master/repo/archive/db/9.2-1:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.2-1/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000.gz
000000010000000000000010-0000000000000000000000000000000000000000
000000010000000000000011-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-3], start = 000000010000000000000000, stop = 000000010000000000000002
* incr backup: label = [BACKUP-INCR-2], prior = [BACKUP-FULL-3], start = 000000010000000000000006, stop = 0000000100000000000000FB
* full backup: label = [BACKUP-FULL-4], start = 0000000100000000000000FF, stop = 000000010000000100000001
* diff backup: label = [BACKUP-DIFF-1], prior = [BACKUP-FULL-4], start = 000000010000000100000005, stop = 000000010000000100000007
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-1]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000000000000C","backup-archive-stop":"00000001000000000000000E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"0000000100000000000000FB","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000005","backup-archive-stop":"000000010000000100000007","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=2
db-system-id=6395542721432104958
db-version="9.3"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-1]
[BACKUP-INCR-1]
[BACKUP-FULL-2]
[BACKUP-FULL-3]
[BACKUP-INCR-2]
[BACKUP-FULL-4]
[BACKUP-DIFF-1]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.2-1
9.3-2

[TEST_PATH]/db-master/repo/archive/db/9.2-1:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.2-1/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000.gz
000000010000000000000010-0000000000000000000000000000000000000000
000000010000000000000011-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000
00000001000000000000000A-0000000000000000000000000000000000000000.gz
00000001000000000000000B-0000000000000000000000000000000000000000
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000
000000010000000000000010-0000000000000000000000000000000000000000.gz
000000010000000000000011-0000000000000000000000000000000000000000
000000010000000000000012-0000000000000000000000000000000000000000.gz
000000010000000000000013-0000000000000000000000000000000000000000
000000010000000000000014-0000000000000000000000000000000000000000.gz
000000010000000000000015-0000000000000000000000000000000000000000
000000010000000000000016-0000000000000000000000000000000000000000.gz
000000010000000000000017-0000000000000000000000000000000000000000
000000010000000000000018-0000000000000000000000000000000000000000.gz
000000010000000000000019-0000000000000000000000000000000000000000
00000001000000000000001A-0000000000000000000000000000000000000000.gz
00000001000000000000001B-0000000000000000000000000000000000000000
00000001000000000000001C-0000000000000000000000000000000000000000.gz
00000001000000000000001D-0000000000000000000000000000000000000000
00000001000000000000001E-0000000000000000000000000000000000000000.gz
00000001000000000000001F-0000000000000000000000000000000000000000
000000010000000000000020-0000000000000000000000000000000000000000.gz
000000010000000000000021-0000000000000000000000000000000000000000
000000010000000000000022-0000000000000000000000000000000000000000.gz
000000010000000000000023-0000000000000000000000000000000000000000
000000010000000000000024-0000000000000000000000000000000000000000.gz
000000010000000000000025-0000000000000000000000000000000000000000
000000010000000000000026-0000000000000000000000000000000000000000.gz
000000010000000000000027-0000000000000000000000000000000000000000
000000010000000000000028-0000000000000000000000000000000000000000.gz
000000010000000000000029-0000000000000000000000000000000000000000
00000001000000000000002A-0000000000000000000000000000000000000000.gz
00000001000000000000002B-0000000000000000000000000000000000000000
00000001000000000000002C-0000000000000000000000000000000000000000.gz
00000001000000000000002D-0000000000000000000000000000000000000000
00000001000000000000002E-0000000000000000000000000000000000000000.gz
00000001000000000000002F-0000000000000000000000000000000000000000
000000010000000000000030-0000000000000000000000000000000000000000.gz
000000010000000000000031-0000000000000000000000000000000000000000
000000010000000000000032-0000000000000000000000000000000000000000.gz
000000010000000000000033-0000000000000000000000000000000000000000
000000010000000000000034-0000000000000000000000000000000000000000.gz
000000010000000000000035-0000000000000000000000000000000000000000
000000010000000000000036-0000000000000000000000000000000000000000.gz
000000010000000000000037-0000000000000000000000000000000000000000
000000010000000000000038-0000000000000000000000000000000000000000.gz
000000010000000000000039-0000000000000000000000000000000000000000
00000001000000000000003A-0000000000000000000000000000000000000000.gz
00000001000000000000003B-0000000000000000000000000000000000000000
00000001000000000000003C-0000000000000000000000000000000000000000.gz
00000001000000000000003D-0000000000000000000000000000000000000000
00000001000000000000003E-0000000000000000000000000000000000000000.gz
00000001000000000000003F-0000000000000000000000000000000000000000
000000010000000000000040-0000000000000000000000000000000000000000.gz
000000010000000000000041-0000000000000000000000000000000000000000
000000010000000000000042-0000000000000000000000000000000000000000.gz
000000010000000000000043-0000000000000000000000000000000000000000
000000010000000000000044-0000000000000000000000000000000000000000.gz
000000010000000000000045-0000000000000000000000000000000000000000
000000010000000000000046-0000000000000000000000000000000000000000.gz
000000010000000000000047-0000000000000000000000000000000000000000
000000010000000000000048-0000000000000000000000000000000000000000.gz
000000010000000000000049-0000000000000000000000000000000000000000
00000001000000000000004A-0000000000000000000000000000000000000000.gz
00000001000000000000004B-0000000000000000000000000000000000000000
00000001000000000000004C-0000000000000000000000000000000000000000.gz
00000001000000000000004D-0000000000000000000000000000000000000000
00000001000000000000004E-0000000000000000000000000000000000000000.gz
00000001000000000000004F-0000000000000000000000000000000000000000
000000010000000000000050-0000000000000000000000000000000000000000.gz
000000010000000000000051-0000000000000000000000000000000000000000
000000010000000000000052-0000000000000000000000000000000000000000.gz
000000010000000000000053-0000000000000000000000000000000000000000
000000010000000000000054-0000000000000000000000000000000000000000.gz
000000010000000000000055-0000000000000000000000000000000000000000
000000010000000000000056-0000000000000000000000000000000000000000.gz
000000010000000000000057-0000000000000000000000000000000000000000
000000010000000000000058-0000000000000000000000000000000000000000.gz
000000010000000000000059-0000000000000000000000000000000000000000
00000001000000000000005A-0000000000000000000000000000000000000000.gz
00000001000000000000005B-0000000000000000000000000000000000000000
00000001000000000000005C-0000000000000000000000000000000000000000.gz
00000001000000000000005D-0000000000000000000000000000000000000000
00000001000000000000005E-0000000000000000000000000000000000000000.gz
00000001000000000000005F-0000000000000000000000000000000000000000
000000010000000000000060-0000000000000000000000000000000000000000.gz
000000010000000000000061-0000000000000000000000000000000000000000
000000010000000000000062-0000000000000000000000000000000000000000.gz
000000010000000000000063-0000000000000000000000000000000000000000
000000010000000000000064-0000000000000000000000000000000000000000.gz
000000010000000000000065-0000000000000000000000000000000000000000
000000010000000000000066-0000000000000000000000000000000000000000.gz
000000010000000000000067-0000000000000000000000000000000000000000
000000010000000000000068-0000000000000000000000000000000000000000.gz
000000010000000000000069-0000000000000000000000000000000000000000
00000001000000000000006A-0000000000000000000000000000000000000000.gz
00000001000000000000006B-0000000000000000000000000000000000000000
00000001000000000000006C-0000000000000000000000000000000000000000.gz
00000001000000000000006D-0000000000000000000000000000000000000000
00000001000000000000006E-0000000000000000000000000000000000000000.gz
00000001000000000000006F-0000000000000000000000000000000000000000
000000010000000000000070-0000000000000000000000000000000000000000.gz
000000010000000000000071-0000000000000000000000000000000000000000
000000010000000000000072-0000000000000000000000000000000000000000.gz
000000010000000000000073-0000000000000000000000000000000000000000
000000010000000000000074-0000000000000000000000000000000000000000.gz
000000010000000000000075-0000000000000000000000000000000000000000
000000010000000000000076-0000000000000000000000000000000000000000.gz
000000010000000000000077-0000000000000000000000000000000000000000
000000010000000000000078-0000000000000000000000000000000000000000.gz
000000010000000000000079-0000000000000000000000000000000000000000
00000001000000000000007A-0000000000000000000000000000000000000000.gz
00000001000000000000007B-0000000000000000000000000000000000000000
00000001000000000000007C-0000000000000000000000000000000000000000.gz
00000001000000000000007D-0000000000000000000000000000000000000000
00000001000000000000007E-0000000000000000000000000000000000000000.gz
00000001000000000000007F-0000000000000000000000000000000000000000
000000010000000000000080-0000000000000000000000000000000000000000.gz
000000010000000000000081-0000000000000000000000000000000000000000
000000010000000000000082-0000000000000000000000000000000000000000.gz
000000010000000000000083-0000000000000000000000000000000000000000
000000010000000000000084-0000000000000000000000000000000000000000.gz
000000010000000000000085-0000000000000000000000000000000000000000
000000010000000000000086-0000000000000000000000000000000000000000.gz
000000010000000000000087-0000000000000000000000000000000000000000
000000010000000000000088-0000000000000000000000000000000000000000.gz
000000010000000000000089-0000000000000000000000000000000000000000
00000001000000000000008A-0000000000000000000000000000000000000000.gz
00000001000000000000008B-0000000000000000000000000000000000000000
00000001000000000000008C-0000000000000000000000000000000000000000.gz
00000001000000000000008D-0000000000000000000000000000000000000000
00000001000000000000008E-0000000000000000000000000000000000000000.gz
00000001000000000000008F-0000000000000000000000000000000000000000
000000010000000000000090-0000000000000000000000000000000000000000.gz
000000010000000000000091-0000000000000000000000000000000000000000
000000010000000000000092-0000000000000000000000000000000000000000.gz
000000010000000000000093-0000000000000000000000000000000000000000
000000010000000000000094-0000000000000000000000000000000000000000.gz
000000010000000000000095-0000000000000000000000000000000000000000
000000010000000000000096-0000000000000000000000000000000000000000.gz
000000010000000000000097-0000000000000000000000000000000000000000
000000010000000000000098-0000000000000000000000000000000000000000.gz
000000010000000000000099-0000000000000000000000000000000000000000
00000001000000000000009A-0000000000000000000000000000000000000000.gz
00000001000000000000009B-0000000000000000000000000000000000000000
00000001000000000000009C-0000000000000000000000000000000000000000.gz
00000001000000000000009D-0000000000000000000000000000000000000000
00000001000000000000009E-0000000000000000000000000000000000000000.gz
00000001000000000000009F-0000000000000000000000000000000000000000
0000000100000000000000A0-0000000000000000000000000000000000000000.gz
0000000100000000000000A1-0000000000000000000000000000000000000000
0000000100000000000000A2-0000000000000000000000000000000000000000.gz
0000000100000000000000A3-0000000000000000000000000000000000000000
0000000100000000000000A4-0000000000000000000000000000000000000000.gz
0000000100000000000000A5-0000000000000000000000000000000000000000
0000000100000000000000A6-0000000000000000000000000000000000000000.gz
0000000100000000000000A7-0000000000000000000000000000000000000000
0000000100000000000000A8-0000000000000000000000000000000000000000.gz
0000000100000000000000A9-0000000000000000000000000000000000000000
0000000100000000000000AA-0000000000000000000000000000000000000000.gz
0000000100000000000000AB-0000000000000000000000000000000000000000
0000000100000000000000AC-0000000000000000000000000000000000000000.gz
0000000100000000000000AD-0000000000000000000000000000000000000000
0000000100000000000000AE-0000000000000000000000000000000000000000.gz
0000000100000000000000AF-0000000000000000000000000000000000000000
0000000100000000000000B0-0000000000000000000000000000000000000000.gz
0000000100000000000000B1-0000000000000000000000000000000000000000
0000000100000000000000B2-0000000000000000000000000000000000000000.gz
0000000100000000000000B3-0000000000000000000000000000000000000000
0000000100000000000000B4-0000000000000000000000000000000000000000.gz
0000000100000000000000B5-0000000000000000000000000000000000000000
0000000100000000000000B6-0000000000000000000000000000000000000000.gz
0000000100000000000000B7-0000000000000000000000000000000000000000
0000000100000000000000B8-0000000000000000000000000000000000000000.gz
0000000100000000000000B9-0000000000000000000000000000000000000000
0000000100000000000000BA-0000000000000000000000000000000000000000.gz
0000000100000000000000BB-0000000000000000000000000000000000000000
0000000100000000000000BC-0000000000000000000000000000000000000000.gz
0000000100000000000000BD-0000000000000000000000000000000000000000
0000000100000000000000BE-0000000000000000000000000000000000000000.gz
0000000100000000000000BF-0000000000000000000000000000000000000000
0000000100000000000000C0-0000000000000000000000000000000000000000.gz
0000000100000000000000C1-0000000000000000000000000000000000000000
0000000100000000000000C2-0000000000000000000000000000000000000000.gz
0000000100000000000000C3-0000000000000000000000000000000000000000
0000000100000000000000C4-0000000000000000000000000000000000000000.gz
0000000100000000000000C5-0000000000000000000000000000000000000000
0000000100000000000000C6-0000000000000000000000000000000000000000.gz
0000000100000000000000C7-0000000000000000000000000000000000000000
0000000100000000000000C8-0000000000000000000000000000000000000000.gz
0000000100000000000000C9-0000000000000000000000000000000000000000
0000000100000000000000CA-0000000000000000000000000000000000000000.gz
0000000100000000000000CB-0000000000000000000000000000000000000000
0000000100000000000000CC-0000000000000000000000000000000000000000.gz
0000000100000000000000CD-0000000000000000000000000000000000000000
0000000100000000000000CE-0000000000000000000000000000000000000000.gz
0000000100000000000000CF-0000000000000000000000000000000000000000
0000000100000000000000D0-0000000000000000000000000000000000000000.gz
0000000100000000000000D1-0000000000000000000000000000000000000000
0000000100000000000000D2-0000000000000000000000000000000000000000.gz
0000000100000000000000D3-0000000000000000000000000000000000000000
0000000100000000000000D4-0000000000000000000000000000000000000000.gz
0000000100000000000000D5-0000000000000000000000000000000000000000
0000000100000000000000D6-0000000000000000000000000000000000000000.gz
0000000100000000000000D7-0000000000000000000000000000000000000000
0000000100000000000000D8-0000000000000000000000000000000000000000.gz
0000000100000000000000D9-0000000000000000000000000000000000000000
0000000100000000000000DA-0000000000000000000000000000000000000000.gz
0000000100000000000000DB-0000000000000000000000000000000000000000
0000000100000000000000DC-0000000000000000000000000000000000000000.gz
0000000100000000000000DD-0000000000000000000000000000000000000000
0000000100000000000000DE-0000000000000000000000000000000000000000.gz
0000000100000000000000DF-0000000000000000000000000000000000000000
0000000100000000000000E0-0000000000000000000000000000000000000000.gz
0000000100000000000000E1-0000000000000000000000000000000000000000
0000000100000000000000E2-0000000000000000000000000000000000000000.gz
0000000100000000000000E3-0000000000000000000000000000000000000000
0000000100000000000000E4-0000000000000000000000000000000000000000.gz
0000000100000000000000E5-0000000000000000000000000000000000000000
0000000100000000000000E6-0000000000000000000000000000000000000000.gz
0000000100000000000000E7-0000000000000000000000000000000000000000
0000000100000000000000E8-0000000000000000000000000000000000000000.gz
0000000100000000000000E9-0000000000000000000000000000000000000000
0000000100000000000000EA-0000000000000000000000000000000000000000.gz
0000000100000000000000EB-0000000000000000000000000000000000000000
0000000100000000000000EC-0000000000000000000000000000000000000000.gz
0000000100000000000000ED-0000000000000000000000000000000000000000
0000000100000000000000EE-0000000000000000000000000000000000000000.gz
0000000100000000000000EF-0000000000000000000000000000000000000000
0000000100000000000000F0-0000000000000000000000000000000000000000.gz
0000000100000000000000F1-0000000000000000000000000000000000000000
0000000100000000000000F2-0000000000000000000000000000000000000000.gz
0000000100000000000000F3-0000000000000000000000000000000000000000
0000000100000000000000F4-0000000000000000000000000000000000000000.gz
0000000100000000000000F5-0000000000000000000000000000000000000000
0000000100000000000000F6-0000000000000000000000000000000000000000.gz
0000000100000000000000F7-0000000000000000000000000000000000000000
0000000100000000000000F8-0000000000000000000000000000000000000000.gz
0000000100000000000000F9-0000000000000000000000000000000000000000
0000000100000000000000FA-0000000000000000000000000000000000000000.gz
0000000100000000000000FB-0000000000000000000000000000000000000000
0000000100000000000000FC-0000000000000000000000000000000000000000.gz
0000000100000000000000FD-0000000000000000000000000000000000000000
0000000100000000000000FE-0000000000000000000000000000000000000000.gz
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

Upgrade stanza and expire only earliest db backup and archive
> [CONTAINER-EXEC] db-master [BACKREST-BIN] --config="[TEST_PATH]/db-master/pgbackrest.conf" --stanza=db --log-level-console=detail --retention-full=3 --retention-archive-type=full expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --config=[TEST_PATH]/db-master/pgbackrest.conf --lock-path=[TEST_PATH]/db-master/repo/lock --log-level-console=detail --log-level-file=trace --log-level-stderr=off --log-path=[TEST_PATH]/db-master/repo/log --repo-path=[TEST_PATH]/db-master/repo --retention-archive-type=full --retention-full=3 --stanza=db
P00   INFO: expire full backup set: [BACKUP-FULL-1], [BACKUP-INCR-1]
P00   INFO: remove expired backup [BACKUP-INCR-1]
P00   INFO: remove expired backup [BACKUP-FULL-1]
P00 DETAIL: archive retention on backup [BACKUP-FULL-2], archiveId = 9.2-1, start = 00000001000000000000000C
P00 DETAIL: remove archive: archiveId = 9.2-1, start = 000000010000000000000000, stop = 00000001000000000000000B
P00 DETAIL: archive retention on backup [BACKUP-FULL-3], archiveId = 9.3-2, start = 000000010000000000000000
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000000000000C","backup-archive-stop":"00000001000000000000000E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"0000000100000000000000FB","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000005","backup-archive-stop":"000000010000000100000007","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=2
db-system-id=6395542721432104958
db-version="9.3"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-2]
[BACKUP-FULL-3]
[BACKUP-INCR-2]
[BACKUP-FULL-4]
[BACKUP-DIFF-1]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.2-1
9.3-2

[TEST_PATH]/db-master/repo/archive/db/9.2-1:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.2-1/0000000100000000:
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000.gz
000000010000000000000010-0000000000000000000000000000000000000000
000000010000000000000011-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000
00000001000000000000000A-0000000000000000000000000000000000000000.gz
00000001000000000000000B-0000000000000000000000000000000000000000
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000
000000010000000000000010-0000000000000000000000000000000000000000.gz
000000010000000000000011-0000000000000000000000000000000000000000
000000010000000000000012-0000000000000000000000000000000000000000.gz
000000010000000000000013-0000000000000000000000000000000000000000
000000010000000000000014-0000000000000000000000000000000000000000.gz
000000010000000000000015-0000000000000000000000000000000000000000
000000010000000000000016-0000000000000000000000000000000000000000.gz
000000010000000000000017-0000000000000000000000000000000000000000
000000010000000000000018-0000000000000000000000000000000000000000.gz
000000010000000000000019-0000000000000000000000000000000000000000
00000001000000000000001A-0000000000000000000000000000000000000000.gz
00000001000000000000001B-0000000000000000000000000000000000000000
00000001000000000000001C-0000000000000000000000000000000000000000.gz
00000001000000000000001D-0000000000000000000000000000000000000000
00000001000000000000001E-0000000000000000000000000000000000000000.gz
00000001000000000000001F-0000000000000000000000000000000000000000
000000010000000000000020-0000000000000000000000000000000000000000.gz
000000010000000000000021-0000000000000000000000000000000000000000
000000010000000000000022-0000000000000000000000000000000000000000.gz
000000010000000000000023-0000000000000000000000000000000000000000
000000010000000000000024-0000000000000000000000000000000000000000.gz
000000010000000000000025-0000000000000000000000000000000000000000
000000010000000000000026-0000000000000000000000000000000000000000.gz
000000010000000000000027-0000000000000000000000000000000000000000
000000010000000000000028-0000000000000000000000000000000000000000.gz
000000010000000000000029-0000000000000000000000000000000000000000
00000001000000000000002A-0000000000000000000000000000000000000000.gz
00000001000000000000002B-0000000000000000000000000000000000000000
00000001000000000000002C-0000000000000000000000000000000000000000.gz
00000001000000000000002D-0000000000000000000000000000000000000000
00000001000000000000002E-0000000000000000000000000000000000000000.gz
00000001000000000000002F-0000000000000000000000000000000000000000
000000010000000000000030-0000000000000000000000000000000000000000.gz
000000010000000000000031-0000000000000000000000000000000000000000
000000010000000000000032-0000000000000000000000000000000000000000.gz
000000010000000000000033-0000000000000000000000000000000000000000
000000010000000000000034-0000000000000000000000000000000000000000.gz
000000010000000000000035-0000000000000000000000000000000000000000
000000010000000000000036-0000000000000000000000000000000000000000.gz
000000010000000000000037-0000000000000000000000000000000000000000
000000010000000000000038-0000000000000000000000000000000000000000.gz
000000010000000000000039-0000000000000000000000000000000000000000
00000001000000000000003A-0000000000000000000000000000000000000000.gz
00000001000000000000003B-0000000000000000000000000000000000000000
00000001000000000000003C-0000000000000000000000000000000000000000.gz
00000001000000000000003D-0000000000000000000000000000000000000000
00000001000000000000003E-0000000000000000000000000000000000000000.gz
00000001000000000000003F-0000000000000000000000000000000000000000
000000010000000000000040-0000000000000000000000000000000000000000.gz
000000010000000000000041-0000000000000000000000000000000000000000
000000010000000000000042-0000000000000000000000000000000000000000.gz
000000010000000000000043-0000000000000000000000000000000000000000
000000010000000000000044-0000000000000000000000000000000000000000.gz
000000010000000000000045-0000000000000000000000000000000000000000
000000010000000000000046-0000000000000000000000000000000000000000.gz
000000010000000000000047-0000000000000000000000000000000000000000
000000010000000000000048-0000000000000000000000000000000000000000.gz
000000010000000000000049-0000000000000000000000000000000000000000
00000001000000000000004A-0000000000000000000000000000000000000000.gz
00000001000000000000004B-0000000000000000000000000000000000000000
00000001000000000000004C-0000000000000000000000000000000000000000.gz
00000001000000000000004D-0000000000000000000000000000000000000000
00000001000000000000004E-0000000000000000000000000000000000000000.gz
00000001000000000000004F-0000000000000000000000000000000000000000
000000010000000000000050-0000000000000000000000000000000000000000.gz
000000010000000000000051-0000000000000000000000000000000000000000
000000010000000000000052-0000000000000000000000000000000000000000.gz
000000010000000000000053-0000000000000000000000000000000000000000
000000010000000000000054-0000000000000000000000000000000000000000.gz
000000010000000000000055-0000000000000000000000000000000000000000
000000010000000000000056-0000000000000000000000000000000000000000.gz
000000010000000000000057-0000000000000000000000000000000000000000
000000010000000000000058-0000000000000000000000000000000000000000.gz
000000010000000000000059-0000000000000000000000000000000000000000
00000001000000000000005A-0000000000000000000000000000000000000000.gz
00000001000000000000005B-0000000000000000000000000000000000000000
00000001000000000000005C-0000000000000000000000000000000000000000.gz
00000001000000000000005D-0000000000000000000000000000000000000000
00000001000000000000005E-0000000000000000000000000000000000000000.gz
00000001000000000000005F-0000000000000000000000000000000000000000
000000010000000000000060-0000000000000000000000000000000000000000.gz
000000010000000000000061-0000000000000000000000000000000000000000
000000010000000000000062-0000000000000000000000000000000000000000.gz
000000010000000000000063-0000000000000000000000000000000000000000
000000010000000000000064-0000000000000000000000000000000000000000.gz
000000010000000000000065-0000000000000000000000000000000000000000
000000010000000000000066-0000000000000000000000000000000000000000.gz
000000010000000000000067-0000000000000000000000000000000000000000
000000010000000000000068-0000000000000000000000000000000000000000.gz
000000010000000000000069-0000000000000000000000000000000000000000
00000001000000000000006A-0000000000000000000000000000000000000000.gz
00000001000000000000006B-0000000000000000000000000000000000000000
00000001000000000000006C-0000000000000000000000000000000000000000.gz
00000001000000000000006D-0000000000000000000000000000000000000000
00000001000000000000006E-0000000000000000000000000000000000000000.gz
00000001000000000000006F-0000000000000000000000000000000000000000
000000010000000000000070-0000000000000000000000000000000000000000.gz
000000010000000000000071-0000000000000000000000000000000000000000
000000010000000000000072-0000000000000000000000000000000000000000.gz
000000010000000000000073-0000000000000000000000000000000000000000
000000010000000000000074-0000000000000000000000000000000000000000.gz
000000010000000000000075-0000000000000000000000000000000000000000
000000010000000000000076-0000000000000000000000000000000000000000.gz
000000010000000000000077-0000000000000000000000000000000000000000
000000010000000000000078-0000000000000000000000000000000000000000.gz
000000010000000000000079-0000000000000000000000000000000000000000
00000001000000000000007A-0000000000000000000000000000000000000000.gz
00000001000000000000007B-0000000000000000000000000000000000000000
00000001000000000000007C-0000000000000000000000000000000000000000.gz
00000001000000000000007D-0000000000000000000000000000000000000000
00000001000000000000007E-0000000000000000000000000000000000000000.gz
00000001000000000000007F-0000000000000000000000000000000000000000
000000010000000000000080-0000000000000000000000000000000000000000.gz
000000010000000000000081-0000000000000000000000000000000000000000
000000010000000000000082-0000000000000000000000000000000000000000.gz
000000010000000000000083-0000000000000000000000000000000000000000
000000010000000000000084-0000000000000000000000000000000000000000.gz
000000010000000000000085-0000000000000000000000000000000000000000
000000010000000000000086-0000000000000000000000000000000000000000.gz
000000010000000000000087-0000000000000000000000000000000000000000
000000010000000000000088-0000000000000000000000000000000000000000.gz
000000010000000000000089-0000000000000000000000000000000000000000
00000001000000000000008A-0000000000000000000000000000000000000000.gz
00000001000000000000008B-0000000000000000000000000000000000000000
00000001000000000000008C-0000000000000000000000000000000000000000.gz
00000001000000000000008D-0000000000000000000000000000000000000000
00000001000000000000008E-0000000000000000000000000000000000000000.gz
00000001000000000000008F-0000000000000000000000000000000000000000
000000010000000000000090-0000000000000000000000000000000000000000.gz
000000010000000000000091-0000000000000000000000000000000000000000
000000010000000000000092-0000000000000000000000000000000000000000.gz
000000010000000000000093-0000000000000000000000000000000000000000
000000010000000000000094-0000000000000000000000000000000000000000.gz
000000010000000000000095-0000000000000000000000000000000000000000
000000010000000000000096-0000000000000000000000000000000000000000.gz
000000010000000000000097-0000000000000000000000000000000000000000
000000010000000000000098-0000000000000000000000000000000000000000.gz
000000010000000000000099-0000000000000000000000000000000000000000
00000001000000000000009A-0000000000000000000000000000000000000000.gz
00000001000000000000009B-0000000000000000000000000000000000000000
00000001000000000000009C-0000000000000000000000000000000000000000.gz
00000001000000000000009D-0000000000000000000000000000000000000000
00000001000000000000009E-0000000000000000000000000000000000000000.gz
00000001000000000000009F-0000000000000000000000000000000000000000
0000000100000000000000A0-0000000000000000000000000000000000000000.gz
0000000100000000000000A1-0000000000000000000000000000000000000000
0000000100000000000000A2-0000000000000000000000000000000000000000.gz
0000000100000000000000A3-0000000000000000000000000000000000000000
0000000100000000000000A4-0000000000000000000000000000000000000000.gz
0000000100000000000000A5-0000000000000000000000000000000000000000
0000000100000000000000A6-0000000000000000000000000000000000000000.gz
0000000100000000000000A7-0000000000000000000000000000000000000000
0000000100000000000000A8-0000000000000000000000000000000000000000.gz
0000000100000000000000A9-0000000000000000000000000000000000000000
0000000100000000000000AA-0000000000000000000000000000000000000000.gz
0000000100000000000000AB-0000000000000000000000000000000000000000
0000000100000000000000AC-0000000000000000000000000000000000000000.gz
0000000100000000000000AD-0000000000000000000000000000000000000000
0000000100000000000000AE-0000000000000000000000000000000000000000.gz
0000000100000000000000AF-0000000000000000000000000000000000000000
0000000100000000000000B0-0000000000000000000000000000000000000000.gz
0000000100000000000000B1-0000000000000000000000000000000000000000
0000000100000000000000B2-0000000000000000000000000000000000000000.gz
0000000100000000000000B3-0000000000000000000000000000000000000000
0000000100000000000000B4-0000000000000000000000000000000000000000.gz
0000000100000000000000B5-0000000000000000000000000000000000000000
0000000100000000000000B6-0000000000000000000000000000000000000000.gz
0000000100000000000000B7-0000000000000000000000000000000000000000
0000000100000000000000B8-0000000000000000000000000000000000000000.gz
0000000100000000000000B9-0000000000000000000000000000000000000000
0000000100000000000000BA-0000000000000000000000000000000000000000.gz
0000000100000000000000BB-0000000000000000000000000000000000000000
0000000100000000000000BC-0000000000000000000000000000000000000000.gz
0000000100000000000000BD-0000000000000000000000000000000000000000
0000000100000000000000BE-0000000000000000000000000000000000000000.gz
0000000100000000000000BF-0000000000000000000000000000000000000000
0000000100000000000000C0-0000000000000000000000000000000000000000.gz
0000000100000000000000C1-0000000000000000000000000000000000000000
0000000100000000000000C2-0000000000000000000000000000000000000000.gz
0000000100000000000000C3-0000000000000000000000000000000000000000
0000000100000000000000C4-0000000000000000000000000000000000000000.gz
0000000100000000000000C5-0000000000000000000000000000000000000000
0000000100000000000000C6-0000000000000000000000000000000000000000.gz
0000000100000000000000C7-0000000000000000000000000000000000000000
0000000100000000000000C8-0000000000000000000000000000000000000000.gz
0000000100000000000000C9-0000000000000000000000000000000000000000
0000000100000000000000CA-0000000000000000000000000000000000000000.gz
0000000100000000000000CB-0000000000000000000000000000000000000000
0000000100000000000000CC-0000000000000000000000000000000000000000.gz
0000000100000000000000CD-0000000000000000000000000000000000000000
0000000100000000000000CE-0000000000000000000000000000000000000000.gz
0000000100000000000000CF-0000000000000000000000000000000000000000
0000000100000000000000D0-0000000000000000000000000000000000000000.gz
0000000100000000000000D1-0000000000000000000000000000000000000000
0000000100000000000000D2-0000000000000000000000000000000000000000.gz
0000000100000000000000D3-0000000000000000000000000000000000000000
0000000100000000000000D4-0000000000000000000000000000000000000000.gz
0000000100000000000000D5-0000000000000000000000000000000000000000
0000000100000000000000D6-0000000000000000000000000000000000000000.gz
0000000100000000000000D7-0000000000000000000000000000000000000000
0000000100000000000000D8-0000000000000000000000000000000000000000.gz
0000000100000000000000D9-0000000000000000000000000000000000000000
0000000100000000000000DA-0000000000000000000000000000000000000000.gz
0000000100000000000000DB-0000000000000000000000000000000000000000
0000000100000000000000DC-0000000000000000000000000000000000000000.gz
0000000100000000000000DD-0000000000000000000000000000000000000000
0000000100000000000000DE-0000000000000000000000000000000000000000.gz
0000000100000000000000DF-0000000000000000000000000000000000000000
0000000100000000000000E0-0000000000000000000000000000000000000000.gz
0000000100000000000000E1-0000000000000000000000000000000000000000
0000000100000000000000E2-0000000000000000000000000000000000000000.gz
0000000100000000000000E3-0000000000000000000000000000000000000000
0000000100000000000000E4-0000000000000000000000000000000000000000.gz
0000000100000000000000E5-0000000000000000000000000000000000000000
0000000100000000000000E6-0000000000000000000000000000000000000000.gz
0000000100000000000000E7-0000000000000000000000000000000000000000
0000000100000000000000E8-0000000000000000000000000000000000000000.gz
0000000100000000000000E9-0000000000000000000000000000000000000000
0000000100000000000000EA-0000000000000000000000000000000000000000.gz
0000000100000000000000EB-0000000000000000000000000000000000000000
0000000100000000000000EC-0000000000000000000000000000000000000000.gz
0000000100000000000000ED-0000000000000000000000000000000000000000
0000000100000000000000EE-0000000000000000000000000000000000000000.gz
0000000100000000000000EF-0000000000000000000000000000000000000000
0000000100000000000000F0-0000000000000000000000000000000000000000.gz
0000000100000000000000F1-0000000000000000000000000000000000000000
0000000100000000000000F2-0000000000000000000000000000000000000000.gz
0000000100000000000000F3-0000000000000000000000000000000000000000
0000000100000000000000F4-0000000000000000000000000000000000000000.gz
0000000100000000000000F5-0000000000000000000000000000000000000000
0000000100000000000000F6-0000000000000000000000000000000000000000.gz
0000000100000000000000F7-0000000000000000000000000000000000000000
0000000100000000000000F8-0000000000000000000000000000000000000000.gz
0000000100000000000000F9-0000000000000000000000000000000000000000
0000000100000000000000FA-0000000000000000000000000000000000000000.gz
0000000100000000000000FB-0000000000000000000000000000000000000000
0000000100000000000000FC-0000000000000000000000000000000000000000.gz
0000000100000000000000FD-0000000000000000000000000000000000000000
0000000100000000000000FE-0000000000000000000000000000000000000000.gz
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-5], start = 000000010000000000000000, stop = 000000010000000000000002
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000000000000C","backup-archive-stop":"00000001000000000000000E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"0000000100000000000000FB","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000005","backup-archive-stop":"000000010000000100000007","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201510051
db-control-version=942
db-id=3
db-system-id=6392579261579036436
db-version="9.5"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}
3={"db-catalog-version":201510051,"db-control-version":942,"db-system-id":6392579261579036436,"db-version":"9.5"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-2]
[BACKUP-FULL-3]
[BACKUP-INCR-2]
[BACKUP-FULL-4]
[BACKUP-DIFF-1]
[BACKUP-FULL-5]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.2-1
9.3-2
9.5-3

[TEST_PATH]/db-master/repo/archive/db/9.2-1:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.2-1/0000000100000000:
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000.gz
000000010000000000000010-0000000000000000000000000000000000000000
000000010000000000000011-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000
00000001000000000000000A-0000000000000000000000000000000000000000.gz
00000001000000000000000B-0000000000000000000000000000000000000000
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000
000000010000000000000010-0000000000000000000000000000000000000000.gz
000000010000000000000011-0000000000000000000000000000000000000000
000000010000000000000012-0000000000000000000000000000000000000000.gz
000000010000000000000013-0000000000000000000000000000000000000000
000000010000000000000014-0000000000000000000000000000000000000000.gz
000000010000000000000015-0000000000000000000000000000000000000000
000000010000000000000016-0000000000000000000000000000000000000000.gz
000000010000000000000017-0000000000000000000000000000000000000000
000000010000000000000018-0000000000000000000000000000000000000000.gz
000000010000000000000019-0000000000000000000000000000000000000000
00000001000000000000001A-0000000000000000000000000000000000000000.gz
00000001000000000000001B-0000000000000000000000000000000000000000
00000001000000000000001C-0000000000000000000000000000000000000000.gz
00000001000000000000001D-0000000000000000000000000000000000000000
00000001000000000000001E-0000000000000000000000000000000000000000.gz
00000001000000000000001F-0000000000000000000000000000000000000000
000000010000000000000020-0000000000000000000000000000000000000000.gz
000000010000000000000021-0000000000000000000000000000000000000000
000000010000000000000022-0000000000000000000000000000000000000000.gz
000000010000000000000023-0000000000000000000000000000000000000000
000000010000000000000024-0000000000000000000000000000000000000000.gz
000000010000000000000025-0000000000000000000000000000000000000000
000000010000000000000026-0000000000000000000000000000000000000000.gz
000000010000000000000027-0000000000000000000000000000000000000000
000000010000000000000028-0000000000000000000000000000000000000000.gz
000000010000000000000029-0000000000000000000000000000000000000000
00000001000000000000002A-0000000000000000000000000000000000000000.gz
00000001000000000000002B-0000000000000000000000000000000000000000
00000001000000000000002C-0000000000000000000000000000000000000000.gz
00000001000000000000002D-0000000000000000000000000000000000000000
00000001000000000000002E-0000000000000000000000000000000000000000.gz
00000001000000000000002F-0000000000000000000000000000000000000000
000000010000000000000030-0000000000000000000000000000000000000000.gz
000000010000000000000031-0000000000000000000000000000000000000000
000000010000000000000032-0000000000000000000000000000000000000000.gz
000000010000000000000033-0000000000000000000000000000000000000000
000000010000000000000034-0000000000000000000000000000000000000000.gz
000000010000000000000035-0000000000000000000000000000000000000000
000000010000000000000036-0000000000000000000000000000000000000000.gz
000000010000000000000037-0000000000000000000000000000000000000000
000000010000000000000038-0000000000000000000000000000000000000000.gz
000000010000000000000039-0000000000000000000000000000000000000000
00000001000000000000003A-0000000000000000000000000000000000000000.gz
00000001000000000000003B-0000000000000000000000000000000000000000
00000001000000000000003C-0000000000000000000000000000000000000000.gz
00000001000000000000003D-0000000000000000000000000000000000000000
00000001000000000000003E-0000000000000000000000000000000000000000.gz
00000001000000000000003F-0000000000000000000000000000000000000000
000000010000000000000040-0000000000000000000000000000000000000000.gz
000000010000000000000041-0000000000000000000000000000000000000000
000000010000000000000042-0000000000000000000000000000000000000000.gz
000000010000000000000043-0000000000000000000000000000000000000000
000000010000000000000044-0000000000000000000000000000000000000000.gz
000000010000000000000045-0000000000000000000000000000000000000000
000000010000000000000046-0000000000000000000000000000000000000000.gz
000000010000000000000047-0000000000000000000000000000000000000000
000000010000000000000048-0000000000000000000000000000000000000000.gz
000000010000000000000049-0000000000000000000000000000000000000000
00000001000000000000004A-0000000000000000000000000000000000000000.gz
00000001000000000000004B-0000000000000000000000000000000000000000
00000001000000000000004C-0000000000000000000000000000000000000000.gz
00000001000000000000004D-0000000000000000000000000000000000000000
00000001000000000000004E-0000000000000000000000000000000000000000.gz
00000001000000000000004F-0000000000000000000000000000000000000000
000000010000000000000050-0000000000000000000000000000000000000000.gz
000000010000000000000051-0000000000000000000000000000000000000000
000000010000000000000052-0000000000000000000000000000000000000000.gz
000000010000000000000053-0000000000000000000000000000000000000000
000000010000000000000054-0000000000000000000000000000000000000000.gz
000000010000000000000055-0000000000000000000000000000000000000000
000000010000000000000056-0000000000000000000000000000000000000000.gz
000000010000000000000057-0000000000000000000000000000000000000000
000000010000000000000058-0000000000000000000000000000000000000000.gz
000000010000000000000059-0000000000000000000000000000000000000000
00000001000000000000005A-0000000000000000000000000000000000000000.gz
00000001000000000000005B-0000000000000000000000000000000000000000
00000001000000000000005C-0000000000000000000000000000000000000000.gz
00000001000000000000005D-0000000000000000000000000000000000000000
00000001000000000000005E-0000000000000000000000000000000000000000.gz
00000001000000000000005F-0000000000000000000000000000000000000000
000000010000000000000060-0000000000000000000000000000000000000000.gz
000000010000000000000061-0000000000000000000000000000000000000000
000000010000000000000062-0000000000000000000000000000000000000000.gz
000000010000000000000063-0000000000000000000000000000000000000000
000000010000000000000064-0000000000000000000000000000000000000000.gz
000000010000000000000065-0000000000000000000000000000000000000000
000000010000000000000066-0000000000000000000000000000000000000000.gz
000000010000000000000067-0000000000000000000000000000000000000000
000000010000000000000068-0000000000000000000000000000000000000000.gz
000000010000000000000069-0000000000000000000000000000000000000000
00000001000000000000006A-0000000000000000000000000000000000000000.gz
00000001000000000000006B-0000000000000000000000000000000000000000
00000001000000000000006C-0000000000000000000000000000000000000000.gz
00000001000000000000006D-0000000000000000000000000000000000000000
00000001000000000000006E-0000000000000000000000000000000000000000.gz
00000001000000000000006F-0000000000000000000000000000000000000000
000000010000000000000070-0000000000000000000000000000000000000000.gz
000000010000000000000071-0000000000000000000000000000000000000000
000000010000000000000072-0000000000000000000000000000000000000000.gz
000000010000000000000073-0000000000000000000000000000000000000000
000000010000000000000074-0000000000000000000000000000000000000000.gz
000000010000000000000075-0000000000000000000000000000000000000000
000000010000000000000076-0000000000000000000000000000000000000000.gz
000000010000000000000077-0000000000000000000000000000000000000000
000000010000000000000078-0000000000000000000000000000000000000000.gz
000000010000000000000079-0000000000000000000000000000000000000000
00000001000000000000007A-0000000000000000000000000000000000000000.gz
00000001000000000000007B-0000000000000000000000000000000000000000
00000001000000000000007C-0000000000000000000000000000000000000000.gz
00000001000000000000007D-0000000000000000000000000000000000000000
00000001000000000000007E-0000000000000000000000000000000000000000.gz
00000001000000000000007F-0000000000000000000000000000000000000000
000000010000000000000080-0000000000000000000000000000000000000000.gz
000000010000000000000081-0000000000000000000000000000000000000000
000000010000000000000082-0000000000000000000000000000000000000000.gz
000000010000000000000083-0000000000000000000000000000000000000000
000000010000000000000084-0000000000000000000000000000000000000000.gz
000000010000000000000085-0000000000000000000000000000000000000000
000000010000000000000086-0000000000000000000000000000000000000000.gz
000000010000000000000087-0000000000000000000000000000000000000000
000000010000000000000088-0000000000000000000000000000000000000000.gz
000000010000000000000089-0000000000000000000000000000000000000000
00000001000000000000008A-0000000000000000000000000000000000000000.gz
00000001000000000000008B-0000000000000000000000000000000000000000
00000001000000000000008C-0000000000000000000000000000000000000000.gz
00000001000000000000008D-0000000000000000000000000000000000000000
00000001000000000000008E-0000000000000000000000000000000000000000.gz
00000001000000000000008F-0000000000000000000000000000000000000000
000000010000000000000090-0000000000000000000000000000000000000000.gz
000000010000000000000091-0000000000000000000000000000000000000000
000000010000000000000092-0000000000000000000000000000000000000000.gz
000000010000000000000093-0000000000000000000000000000000000000000
000000010000000000000094-0000000000000000000000000000000000000000.gz
000000010000000000000095-0000000000000000000000000000000000000000
000000010000000000000096-0000000000000000000000000000000000000000.gz
000000010000000000000097-0000000000000000000000000000000000000000
000000010000000000000098-0000000000000000000000000000000000000000.gz
000000010000000000000099-0000000000000000000000000000000000000000
00000001000000000000009A-0000000000000000000000000000000000000000.gz
00000001000000000000009B-0000000000000000000000000000000000000000
00000001000000000000009C-0000000000000000000000000000000000000000.gz
00000001000000000000009D-0000000000000000000000000000000000000000
00000001000000000000009E-0000000000000000000000000000000000000000.gz
00000001000000000000009F-0000000000000000000000000000000000000000
0000000100000000000000A0-0000000000000000000000000000000000000000.gz
0000000100000000000000A1-0000000000000000000000000000000000000000
0000000100000000000000A2-0000000000000000000000000000000000000000.gz
0000000100000000000000A3-0000000000000000000000000000000000000000
0000000100000000000000A4-0000000000000000000000000000000000000000.gz
0000000100000000000000A5-0000000000000000000000000000000000000000
0000000100000000000000A6-0000000000000000000000000000000000000000.gz
0000000100000000000000A7-0000000000000000000000000000000000000000
0000000100000000000000A8-0000000000000000000000000000000000000000.gz
0000000100000000000000A9-0000000000000000000000000000000000000000
0000000100000000000000AA-0000000000000000000000000000000000000000.gz
0000000100000000000000AB-0000000000000000000000000000000000000000
0000000100000000000000AC-0000000000000000000000000000000000000000.gz
0000000100000000000000AD-0000000000000000000000000000000000000000
0000000100000000000000AE-0000000000000000000000000000000000000000.gz
0000000100000000000000AF-0000000000000000000000000000000000000000
0000000100000000000000B0-0000000000000000000000000000000000000000.gz
0000000100000000000000B1-0000000000000000000000000000000000000000
0000000100000000000000B2-0000000000000000000000000000000000000000.gz
0000000100000000000000B3-0000000000000000000000000000000000000000
0000000100000000000000B4-0000000000000000000000000000000000000000.gz
0000000100000000000000B5-0000000000000000000000000000000000000000
0000000100000000000000B6-0000000000000000000000000000000000000000.gz
0000000100000000000000B7-0000000000000000000000000000000000000000
0000000100000000000000B8-0000000000000000000000000000000000000000.gz
0000000100000000000000B9-0000000000000000000000000000000000000000
0000000100000000000000BA-0000000000000000000000000000000000000000.gz
0000000100000000000000BB-0000000000000000000000000000000000000000
0000000100000000000000BC-0000000000000000000000000000000000000000.gz
0000000100000000000000BD-0000000000000000000000000000000000000000
0000000100000000000000BE-0000000000000000000000000000000000000000.gz
0000000100000000000000BF-0000000000000000000000000000000000000000
0000000100000000000000C0-0000000000000000000000000000000000000000.gz
0000000100000000000000C1-0000000000000000000000000000000000000000
0000000100000000000000C2-0000000000000000000000000000000000000000.gz
0000000100000000000000C3-0000000000000000000000000000000000000000
0000000100000000000000C4-0000000000000000000000000000000000000000.gz
0000000100000000000000C5-0000000000000000000000000000000000000000
0000000100000000000000C6-0000000000000000000000000000000000000000.gz
0000000100000000000000C7-0000000000000000000000000000000000000000
0000000100000000000000C8-0000000000000000000000000000000000000000.gz
0000000100000000000000C9-0000000000000000000000000000000000000000
0000000100000000000000CA-0000000000000000000000000000000000000000.gz
0000000100000000000000CB-0000000000000000000000000000000000000000
0000000100000000000000CC-0000000000000000000000000000000000000000.gz
0000000100000000000000CD-0000000000000000000000000000000000000000
0000000100000000000000CE-0000000000000000000000000000000000000000.gz
0000000100000000000000CF-0000000000000000000000000000000000000000
0000000100000000000000D0-0000000000000000000000000000000000000000.gz
0000000100000000000000D1-0000000000000000000000000000000000000000
0000000100000000000000D2-0000000000000000000000000000000000000000.gz
0000000100000000000000D3-0000000000000000000000000000000000000000
0000000100000000000000D4-0000000000000000000000000000000000000000.gz
0000000100000000000000D5-0000000000000000000000000000000000000000
0000000100000000000000D6-0000000000000000000000000000000000000000.gz
0000000100000000000000D7-0000000000000000000000000000000000000000
0000000100000000000000D8-0000000000000000000000000000000000000000.gz
0000000100000000000000D9-0000000000000000000000000000000000000000
0000000100000000000000DA-0000000000000000000000000000000000000000.gz
0000000100000000000000DB-0000000000000000000000000000000000000000
0000000100000000000000DC-0000000000000000000000000000000000000000.gz
0000000100000000000000DD-0000000000000000000000000000000000000000
0000000100000000000000DE-0000000000000000000000000000000000000000.gz
0000000100000000000000DF-0000000000000000000000000000000000000000
0000000100000000000000E0-0000000000000000000000000000000000000000.gz
0000000100000000000000E1-0000000000000000000000000000000000000000
0000000100000000000000E2-0000000000000000000000000000000000000000.gz
0000000100000000000000E3-0000000000000000000000000000000000000000
0000000100000000000000E4-0000000000000000000000000000000000000000.gz
0000000100000000000000E5-0000000000000000000000000000000000000000
0000000100000000000000E6-0000000000000000000000000000000000000000.gz
0000000100000000000000E7-0000000000000000000000000000000000000000
0000000100000000000000E8-0000000000000000000000000000000000000000.gz
0000000100000000000000E9-0000000000000000000000000000000000000000
0000000100000000000000EA-0000000000000000000000000000000000000000.gz
0000000100000000000000EB-0000000000000000000000000000000000000000
0000000100000000000000EC-0000000000000000000000000000000000000000.gz
0000000100000000000000ED-0000000000000000000000000000000000000000
0000000100000000000000EE-0000000000000000000000000000000000000000.gz
0000000100000000000000EF-0000000000000000000000000000000000000000
0000000100000000000000F0-0000000000000000000000000000000000000000.gz
0000000100000000000000F1-0000000000000000000000000000000000000000
0000000100000000000000F2-0000000000000000000000000000000000000000.gz
0000000100000000000000F3-0000000000000000000000000000000000000000
0000000100000000000000F4-0000000000000000000000000000000000000000.gz
0000000100000000000000F5-0000000000000000000000000000000000000000
0000000100000000000000F6-0000000000000000000000000000000000000000.gz
0000000100000000000000F7-0000000000000000000000000000000000000000
0000000100000000000000F8-0000000000000000000000000000000000000000.gz
0000000100000000000000F9-0000000000000000000000000000000000000000
0000000100000000000000FA-0000000000000000000000000000000000000000.gz
0000000100000000000000FB-0000000000000000000000000000000000000000
0000000100000000000000FC-0000000000000000000000000000000000000000.gz
0000000100000000000000FD-0000000000000000000000000000000000000000
0000000100000000000000FE-0000000000000000000000000000000000000000.gz
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.5-3:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.5-3/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz

Upgrade the stanza, create full back - earliest db orphaned archive removed and earliest full backup and archive in previous db version removed
> [CONTAINER-EXEC] db-master [BACKREST-BIN] --config="[TEST_PATH]/db-master/pgbackrest.conf" --stanza=db --log-level-console=detail --retention-full=2 --retention-archive-type=full expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --config=[TEST_PATH]/db-master/pgbackrest.conf --lock-path=[TEST_PATH]/db-master/repo/lock --log-level-console=detail --log-level-file=trace --log-level-stderr=off --log-path=[TEST_PATH]/db-master/repo/log --repo-path=[TEST_PATH]/db-master/repo --retention-archive-type=full --retention-full=2 --stanza=db
P00   INFO: expire full backup [BACKUP-FULL-2]
P00   INFO: expire full backup set: [BACKUP-FULL-3], [BACKUP-INCR-2]
P00   INFO: remove expired backup [BACKUP-INCR-2]
P00   INFO: remove expired backup [BACKUP-FULL-3]
P00   INFO: remove expired backup [BACKUP-FULL-2]
P00   INFO: remove archive path: [TEST_PATH]/db-master/repo/archive/db/9.2-1
P00 DETAIL: archive retention on backup [BACKUP-FULL-4], archiveId = 9.3-2, start = 0000000100000000000000FF
P00 DETAIL: remove archive: archiveId = 9.3-2, start = 000000010000000000000000, stop = 0000000100000000000000FE
P00 DETAIL: archive retention on backup [BACKUP-FULL-5], archiveId = 9.5-3, start = 000000010000000000000000
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000005","backup-archive-stop":"000000010000000100000007","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201510051
db-control-version=942
db-id=3
db-system-id=6392579261579036436
db-version="9.5"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}
3={"db-catalog-version":201510051,"db-control-version":942,"db-system-id":6392579261579036436,"db-version":"9.5"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-DIFF-1]
[BACKUP-FULL-5]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.3-2
9.5-3

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.5-3:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.5-3/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-6], start = 000000010000000000000006, stop = 000000010000000000000008
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000005","backup-archive-stop":"000000010000000100000007","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201510051
db-control-version=942
db-id=3
db-system-id=6392579261579036436
db-version="9.5"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}
3={"db-catalog-version":201510051,"db-control-version":942,"db-system-id":6392579261579036436,"db-version":"9.5"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-DIFF-1]
[BACKUP-FULL-5]
[BACKUP-FULL-6]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.3-2
9.5-3

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.5-3:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.5-3/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz

Expire all archive last full backup through pitr
> [CONTAINER-EXEC] db-master [BACKREST-BIN] --config="[TEST_PATH]/db-master/pgbackrest.conf" --stanza=db --log-level-console=detail --retention-full=3 --retention-diff=1 --retention-archive-type=diff --retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --config=[TEST_PATH]/db-master/pgbackrest.conf --lock-path=[TEST_PATH]/db-master/repo/lock --log-level-console=detail --log-level-file=trace --log-level-stderr=off --log-path=[TEST_PATH]/db-master/repo/log --repo-path=[TEST_PATH]/db-master/repo --retention-archive=1 --retention-archive-type=diff --retention-diff=1 --retention-full=3 --stanza=db
P00   INFO: expire diff backup [BACKUP-DIFF-1]
P00   INFO: remove expired backup [BACKUP-DIFF-1]
P00 DETAIL: archive retention on backup [BACKUP-FULL-4], archiveId = 9.3-2, start = 0000000100000000000000FF
P00 DETAIL: no archive to remove, archiveId = 9.3-2
P00 DETAIL: archive retention on backup [BACKUP-FULL-5], archiveId = 9.5-3, start = 000000010000000000000000, stop = 000000010000000000000002
P00 DETAIL: archive retention on backup [BACKUP-FULL-6], archiveId = 9.5-3, start = 000000010000000000000006
P00 DETAIL: remove archive: archiveId = 9.5-3, start = 000000010000000000000003, stop = 000000010000000000000005
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201510051
db-control-version=942
db-id=3
db-system-id=6392579261579036436
db-version="9.5"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}
3={"db-catalog-version":201510051,"db-control-version":942,"db-system-id":6392579261579036436,"db-version":"9.5"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.3-2
9.5-3

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.5-3:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.5-3/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"0000000100000000000000FF","backup-archive-stop":"000000010000000100000001","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":2,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201510051
db-control-version=942
db-id=3
db-system-id=6392579261579036436
db-version="9.5"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}
3={"db-catalog-version":201510051,"db-control-version":942,"db-system-id":6392579261579036436,"db-version":"9.5"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.3-2
9.5-3

[TEST_PATH]/db-master/repo/archive/db/9.3-2:
0000000100000000
0000000100000001

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000000:
0000000100000000000000FF-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.3-2/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000
000000010000000100000001-0000000000000000000000000000000000000000.gz
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000
000000010000000100000004-0000000000000000000000000000000000000000.gz
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000
000000010000000100000007-0000000000000000000000000000000000000000.gz
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000
00000001000000010000000A-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-master/repo/archive/db/9.5-3:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.5-3/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz

Expire all archive except for the current database
> [CONTAINER-EXEC] db-master [BACKREST-BIN] --config="[TEST_PATH]/db-master/pgbackrest.conf" --stanza=db --log-level-console=detail --retention-full=2 --retention-archive-type=full expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --config=[TEST_PATH]/db-master/pgbackrest.conf --lock-path=[TEST_PATH]/db-master/repo/lock --log-level-console=detail --log-level-file=trace --log-level-stderr=off --log-path=[TEST_PATH]/db-master/repo/log --repo-path=[TEST_PATH]/db-master/repo --retention-archive-type=full --retention-full=2 --stanza=db
P00   INFO: expire full backup [BACKUP-FULL-4]
P00   INFO: remove expired backup [BACKUP-FULL-4]
P00   INFO: remove archive path: [TEST_PATH]/db-master/repo/archive/db/9.3-2
P00 DETAIL: archive retention on backup [BACKUP-FULL-5], archiveId = 9.5-3, start = 000000010000000000000000
P00 DETAIL: no archive to remove, archiveId = 9.5-3
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-master/repo/backup/db/backup.info
---------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=5
backrest-sequence=[SEQUENCE]
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"000000010000000000000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":3,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201510051
db-control-version=942
db-id=3
db-system-id=6392579261579036436
db-version="9.5"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":6393320793115174899,"db-version":"9.2"}
2={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6395542721432104958,"db-version":"9.3"}
3={"db-catalog-version":201510051,"db-control-version":942,"db-system-id":6392579261579036436,"db-version":"9.5"}

> ls [TEST_PATH]/db-master/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-5]
[BACKUP-FULL-6]

> ls -R [TEST_PATH]/db-master/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-master/repo/archive/db:
9.5-3

[TEST_PATH]/db-master/repo/archive/db/9.5-3:
0000000100000000

[TEST_PATH]/db-master/repo/archive/db/9.5-3/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000.gz
00000001000000000000000A-0000000000000000000000000000000000000000
00000001000000000000000B-0000000000000000000000000000000000000000.gz
